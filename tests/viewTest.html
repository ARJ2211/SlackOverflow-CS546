<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rich Text Editor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Quill.js CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/quill/1.3.7/quill.snow.css" rel="stylesheet">
    <!-- Quill.js JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/quill/1.3.7/quill.min.js"></script>
    <style>
        /* Custom Quill Editor Styles */
        .ql-container {
            font-size: 16px;
            font-family: inherit;
        }

        .ql-editor {
            min-height: 150px;
            max-height: 400px;
            overflow-y: auto;
        }

        .ql-editor.ql-blank::before {
            color: #9ca3af;
            font-style: normal;
        }

        /* Custom scrollbar */
        .ql-editor::-webkit-scrollbar {
            width: 6px;
        }

        .ql-editor::-webkit-scrollbar-track {
            background: transparent;
        }

        .ql-editor::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 10px;
        }

        .ql-editor::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }

        /* Toolbar customization */
        .ql-toolbar.ql-snow {
            border: none;
            border-bottom: 1px solid #e5e7eb;
            padding: 6px;
            background: white;
        }

        .ql-container.ql-snow {
            border: none;
        }

        .ql-snow .ql-stroke {
            stroke: #4b5563;
        }

        .ql-snow .ql-fill {
            fill: #4b5563;
        }

        .ql-snow .ql-picker-label {
            color: #4b5563;
        }

        .ql-toolbar button:hover,
        .ql-toolbar button:focus,
        .ql-toolbar button.ql-active {
            color: #2563eb;
        }

        .ql-toolbar button:hover .ql-stroke,
        .ql-toolbar button:focus .ql-stroke,
        .ql-toolbar button.ql-active .ql-stroke {
            stroke: #2563eb;
        }

        .ql-toolbar button:hover .ql-fill,
        .ql-toolbar button:focus .ql-fill,
        .ql-toolbar button.ql-active .ql-fill {
            fill: #2563eb;
        }
    </style>
</head>

<body class="bg-gray-50 min-h-screen flex items-center justify-center p-8">
    <div class="w-full max-w-4xl">
        <div class="bg-white border border-gray-300 rounded-2xl shadow-lg overflow-hidden">
            <!-- Quill Editor Toolbar -->


            <!-- Quill Editor Container -->
            <div id="editor"></div>

            <!-- Bottom Toolbar -->
            <div class="p-3 flex justify-between items-center gap-x-3 border-t border-gray-200 bg-white">
                <!-- Left Side Buttons -->
                <div class="flex items-center gap-x-1">
                    <!-- File Attach Button -->
                    <label
                        class="flex justify-center items-center gap-x-2 py-1.5 px-3 text-sm text-gray-600 hover:bg-gray-100 rounded-lg cursor-pointer focus:outline-none focus:bg-gray-100"
                        title="Attach File">
                        <svg class="size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <path
                                d="m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48" />
                        </svg>
                        <input type="file" class="hidden" id="fileInput" multiple>
                    </label>


                    <div id="toolbar">
                        <!-- Font -->
                        <select class="ql-font">
                            <option selected></option>
                            <option value="serif"></option>
                            <option value="monospace"></option>
                        </select>

                        <!-- Font Size -->
                        <select class="ql-size">
                            <option value="small"></option>
                            <option selected></option>
                            <option value="large"></option>
                            <option value="huge"></option>
                        </select>

                        <span class="ql-formats">
                            <button class="ql-bold" title="Bold"></button>
                            <button class="ql-italic" title="Italic"></button>
                            <button class="ql-underline" title="Underline"></button>
                            <button class="ql-strike" title="Strikethrough"></button>
                        </span>

                        <span class="ql-formats">
                            <select class="ql-color" title="Text Color"></select>
                            <select class="ql-background" title="Background Color"></select>
                        </span>

                        <span class="ql-formats">
                            <button class="ql-list" value="ordered" title="Numbered List"></button>
                            <button class="ql-list" value="bullet" title="Bullet List"></button>
                            <select class="ql-align" title="Alignment"></select>
                        </span>

                        <span class="ql-formats">
                            <button class="ql-link" title="Insert Link"></button>
                            <button class="ql-image" title="Insert Image"></button>
                            <button class="ql-video" title="Insert Video"></button>
                            <button class="ql-code-block" title="Code Block"></button>
                        </span>


                    </div>

                    <!-- Emoji Button -->
                    <button type="button"
                        class="flex justify-center items-center size-8 text-gray-600 hover:bg-gray-100 rounded-lg focus:outline-none focus:bg-gray-100"
                        title="Insert Emoji">
                        <svg class="size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10" />
                            <path d="M8 14s1.5 2 4 2 4-2 4-2" />
                            <line x1="9" x2="9.01" y1="9" y2="9" />
                            <line x1="15" x2="15.01" y1="9" y2="9" />
                        </svg>
                    </button>
                </div>

                <!-- Right Side -->
                <div class="flex items-center gap-x-3">
                    <!-- Character Count -->
                    <span id="charCount" class="text-xs text-gray-500">0 characters</span>

                    <!-- Send Button -->
                    <button type="button" id="sendBtn"
                        class="inline-flex shrink-0 justify-center items-center gap-x-2 px-4 py-2 text-sm font-semibold rounded-lg text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:pointer-events-none focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <span>Send</span>
                        <svg class="size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <path d="m5 12 7-7 7 7" />
                            <path d="M12 19V5" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Attached Files Display -->
        <div id="attachedFiles" class="mt-3 hidden">
            <div class="bg-white border border-gray-200 rounded-lg p-3">
                <p class="text-sm font-medium text-gray-700 mb-2">Attached Files:</p>
                <div id="filesList" class="space-y-2"></div>
            </div>
        </div>

        <!-- Info Text -->
        <p class="mt-3 text-sm text-gray-500 text-center">
            Use the formatting toolbar to style your text â€¢ Support for rich text, images, and file attachments
        </p>
    </div>

    <script>
        // Initialize Quill editor
        const quill = new Quill('#editor', {
            theme: 'snow',
            modules: {
                toolbar: '#toolbar'
            },
            placeholder: 'Type your message here...'
        });

        // Character counter
        const charCount = document.getElementById('charCount');

        quill.on('text-change', function () {
            const text = quill.getText();
            const length = text.trim().length;
            charCount.textContent = `${length} character${length !== 1 ? 's' : ''}`;
        });

        // File attachment handling
        const fileInput = document.getElementById('fileInput');
        const attachedFilesDiv = document.getElementById('attachedFiles');
        const filesList = document.getElementById('filesList');
        let attachedFiles = [];

        fileInput.addEventListener('change', function (e) {
            const files = Array.from(e.target.files);
            attachedFiles = [...attachedFiles, ...files];
            displayAttachedFiles();
            fileInput.value = ''; // Reset input
        });

        function displayAttachedFiles() {
            if (attachedFiles.length > 0) {
                attachedFilesDiv.classList.remove('hidden');
                filesList.innerHTML = attachedFiles.map((file, index) => `
                    <div class="flex items-center justify-between p-2 bg-gray-50 rounded-lg">
                        <div class="flex items-center gap-x-2">
                            <svg class="size-4 text-gray-600" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                <polyline points="14 2 14 8 20 8"/>
                            </svg>
                            <span class="text-sm text-gray-700">${file.name}</span>
                            <span class="text-xs text-gray-500">(${(file.size / 1024).toFixed(1)} KB)</span>
                        </div>
                        <button onclick="removeFile(${index})" class="text-red-600 hover:text-red-700">
                            <svg class="size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <line x1="18" y1="6" x2="6" y2="18"/>
                                <line x1="6" y1="6" x2="18" y2="18"/>
                            </svg>
                        </button>
                    </div>
                `).join('');
            } else {
                attachedFilesDiv.classList.add('hidden');
            }
        }

        function removeFile(index) {
            attachedFiles.splice(index, 1);
            displayAttachedFiles();
        }

        // Send button handler
        document.getElementById('sendBtn').addEventListener('click', function () {
            const content = quill.root.innerHTML;
            const plainText = quill.getText().trim();

            if (plainText || attachedFiles.length > 0) {
                console.log('Sending message...');
                console.log('HTML Content:', content);
                console.log('Plain Text:', plainText);
                console.log('Attached Files:', attachedFiles);

                // Show success message
                alert('Message sent successfully!\n\nContent: ' + (plainText || '(no text)') + '\nFiles: ' + attachedFiles.length);

                // Clear editor and files
                quill.setContents([]);
                attachedFiles = [];
                displayAttachedFiles();
            } else {
                alert('Please enter some text or attach a file before sending.');
            }
        });

        // Keyboard shortcut (Ctrl/Cmd + Enter to send)
        quill.root.addEventListener('keydown', function (e) {
            if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                document.getElementById('sendBtn').click();
            }
        });
    </script>
</body>

</html>