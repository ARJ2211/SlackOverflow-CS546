<div onclick="handleOutsideClick(event)" class="w-full h-full flex flex-col px-6 py-4">
    <!-- Header -->
    <div class="flex items-center justify-between mb-4 border-b pb-2">
        <div class="flex items-start gap-4">
            <a href="/main/courses/{{course._id}}" class="mt-1">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                    class="size-9 text-gray-400 opacity-70 hover:opacity-100  hover:text-[#F0BD66] hover:cursor-pointer">
                    <path fill-rule="evenodd"
                        d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-4.28 9.22a.75.75 0 0 0 0 1.06l3 3a.75.75 0 1 0 1.06-1.06l-1.72-1.72h5.69a.75.75 0 0 0 0-1.5h-5.69l1.72-1.72a.75.75 0 0 0-1.06-1.06l-3 3Z"
                        clip-rule="evenodd" />
                </svg>

            </a>
            <div>
                <h1 class="text-xl font-semibold text-gray-800">{{title}}

                </h1>
                <p class="text-gray-400 text-sm  flex items-center gap-1">
                    <a href="/">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"
                            class="size-4 hover:text-[#F0BD66] ">
                            <path fill-rule="evenodd"
                                d="M9.293 2.293a1 1 0 0 1 1.414 0l7 7A1 1 0 0 1 17 11h-1v6a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-6H3a1 1 0 0 1-.707-1.707l7-7Z"
                                clip-rule="evenodd" />
                        </svg>
                    </a>
                    {{path}}
                </p>
            </div>
        </div>

    </div>

    <!-- Page Content -->
    <div id="questionContainer" data-course-id='{{course._id}}' data-question-id='{{question._id}}'
        class=" flex-1  flex flex-col overflow-y-auto h-[88%] w-full gap-4 ">
        <div class="bg-white rounded-3xl shadow-sm py-3 px-6 border border-[#F0BD66] ">
            <div class=" flex items-center justify-between mb-2">
                <div class="flex gap-3">
                    {{#each question.labels}}
                    <div key="{{this._id}}" class="border border-[#F0BD66] text-[#F0BD66] text-sm  px-4 rounded-3xl ">
                        {{this.name}}
                    </div>
                    {{/each}}
                </div>
                <div>
                    {{#if (eq question.status "open")}}

                    <div class="border border-green-500 text-green-500 text-sm  px-4 rounded-3xl ">
                        {{question.status}}
                    </div>
                    {{else}}
                    <div class="border border-gray-500 text-gray-500 text-sm  px-4 rounded-3xl ">
                        Closed
                    </div>
                    {{/if}}
                </div>
            </div>


            <div id="questionDisplay-{{question._id}}" class=" "></div>
            <script>
                const delta = {{{ question.question_delta }}}
                const container = document.getElementById(`questionDisplay-{{question._id}}`);
                const editor = document.createElement('div');
                editor.classList.add('text-base')
                container.appendChild(editor);
                const quillQuestion = new Quill(editor, {
                    theme: 'snow',
                    readOnly: true,
                    modules: { toolbar: false }
                });

                quillQuestion.setContents(delta)
            </script>



            <div class="flex items-center justify-between text-gray-500 text-sm">
                <div class="flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="size-4">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" />
                    </svg>

                    <span class="font-medium">{{question.user.first_name}} {{question.user.last_name}}</span>
                    <span>asked {{question.timeAgo}}</span>
                </div>

                <div class="flex items-center gap-6">
                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" class="size-4">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.282 48.282 0 0 0 5.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z" />
                        </svg>

                        <span>{{#if question.answer_count}}{{question.answer_count}}{{else}}0{{/if}} answers</span>

                    </div>

                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" class="size-4">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z" />
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                        </svg>


                        <span>{{#if question.views}}{{question.views}}{{else}}0{{/if}} views</span>

                    </div>

                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" class="size-4">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M6.633 10.25c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75a.75.75 0 0 1 .75-.75 2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282m0 0h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23H5.904m10.598-9.75H14.25M5.904 18.5c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 0 1-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 9.953 4.167 9.5 5 9.5h1.053c.472 0 .745.556.5.96a8.958 8.958 0 0 0-1.302 4.665c0 1.194.232 2.333.654 3.375Z" />
                        </svg>

                        <span>{{#if question.votes}}{{question.votes}}{{else}}0{{/if}} votes</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Comment Section -->

        <div class=" py-4 pb-6 divide-y divide-gray-200 flex flex-col ">

            <!-- Answer -->
            <div class="p-6 text-base  rounded-lg dark:bg-gray-900">
                <div class="flex justify-between items-center mb-2">
                    <div class="flex items-center">
                        <p class="inline-flex items-center mr-3 text-sm text-gray-900 dark:text-white font-semibold">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"
                                class="mr-2 w-6 h-6 rounded-full">
                                <path
                                    d="M10 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM3.465 14.493a1.23 1.23 0 0 0 .41 1.412A9.957 9.957 0 0 0 10 18c2.31 0 4.438-.784 6.131-2.1.43-.333.604-.903.408-1.41a7.002 7.002 0 0 0-13.074.003Z" />
                            </svg>

                            Michael Gough
                        </p>
                        <p class="text-sm text-gray-600 dark:text-gray-400"><time pubdate datetime="2022-02-08"
                                title="February 8th, 2022">Feb. 8, 2022</time></p>
                    </div>
                    <div class="relative">
                        <div onclick="handleActionsDropdown()" id="openActionsDropdown"
                            class="hover:cursor-pointer hover:bg-gray-100 rounded-md p-1 w-fit">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"
                                class="size-5 pointer-events-none">
                                <path
                                    d="M3 10a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM8.5 10a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM15.5 8.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Z" />
                            </svg>
                        </div>
                        <div id="actionsDropdown"
                            class="z-50 absolute hidden right-0 top-6 bg-white rounded-2xl bg-neutral-primary-medium border border-default-medium rounded-base shadow-lg w-28">
                            <ul class="p-3 text-sm text-body font-medium space-y-1">

                                <li
                                    class=" text-sm font-medium text-heading hover:bg-gray-100 hover:cursor-pointer rounded-md p-1">
                                    Edit
                                </li>
                                <li
                                    class=" text-sm font-medium text-heading hover:bg-gray-100 hover:cursor-pointer rounded-md p-1">
                                    Delete
                                </li>
                                <li
                                    class=" text-sm font-medium text-heading hover:bg-gray-100 hover:cursor-pointer rounded-md p-1">
                                    Approve
                                </li>
                            </ul>
                        </div>


                    </div>
                </div>
                <p class="text-gray-500 dark:text-gray-400">Very straight-to-point article. Really worth time
                    reading. Thank you! But tools are just the
                    instruments for the UX designers. The knowledge of the design tools are as important as the
                    creation of the design strategy.</p>

            </div>


        </div>
    </div>



    <div class="">
        <form onsubmit="handleSaveAnswer(event)"
            class="bg-white relative border border-gray-300 rounded-2xl shadow-md flex flex-col  ">


            <div id="editor" class=" pt-1  rounded-t-2xl resize-none focus:outline-none"></div>

            <div id="resizeHandle"
                class=" absolute -top-0 -right-0 hover:-top-1 hover:bg-slate-100 rounded-full p-1 text-gray-400 ">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
                    <path fill-rule="evenodd"
                        d="M2.25 4.5A.75.75 0 0 1 3 3.75h14.25a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1-.75-.75Zm14.47 3.97a.75.75 0 0 1 1.06 0l3.75 3.75a.75.75 0 1 1-1.06 1.06L18 10.81V21a.75.75 0 0 1-1.5 0V10.81l-2.47 2.47a.75.75 0 1 1-1.06-1.06l3.75-3.75ZM2.25 9A.75.75 0 0 1 3 8.25h9.75a.75.75 0 0 1 0 1.5H3A.75.75 0 0 1 2.25 9Zm0 4.5a.75.75 0 0 1 .75-.75h5.25a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1-.75-.75Z"
                        clip-rule="evenodd" />
                </svg>
            </div>

            <div class="rounded-b-2xl flex items-center justify-between  ">

                <div class="flex items-center ml-2">

                    <div class=" hover:cursor-pointer h-fit  -mr-1">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                            class="size-[17px] hover:text-blue-600">
                            <path fill-rule="evenodd"
                                d="M18.97 3.659a2.25 2.25 0 0 0-3.182 0l-10.94 10.94a3.75 3.75 0 1 0 5.304 5.303l7.693-7.693a.75.75 0 0 1 1.06 1.06l-7.693 7.693a5.25 5.25 0 1 1-7.424-7.424l10.939-10.94a3.75 3.75 0 1 1 5.303 5.304L9.097 18.835l-.008.008-.007.007-.002.002-.003.002A2.25 2.25 0 0 1 5.91 15.66l7.81-7.81a.75.75 0 0 1 1.061 1.06l-7.81 7.81a.75.75 0 0 0 1.054 1.068L18.97 6.84a2.25 2.25 0 0 0 0-3.182Z"
                                clip-rule="evenodd" />
                        </svg>
                    </div>

                    <div id="toolbar" class="ql-toolbar  flex items-center gap-2">
                        <span class="ql-formats">
                            <button class="ql-link" title="Insert Link"></button>
                            <button class="ql-image" title="Insert Image"></button>
                            <button class="ql-video" title="Insert Video"></button>
                            <button class="ql-code-block" title="Code Block"></button>
                        </span>
                        <select class="ql-font"></select>

                        <select class="ql-size">
                            <option value="small"></option>
                            <option selected></option>
                            <option value="large"></option>
                            <option value="huge"></option>
                        </select>

                        <span class="ql-formats">
                            <button class="ql-bold"></button>
                            <button class="ql-italic"></button>
                            <button class="ql-underline"></button>
                            <button class="ql-strike"></button>
                        </span>

                        <span class="ql-formats">
                            <select class="ql-color"></select>
                            <select class="ql-background"></select>
                        </span>

                        <span class="ql-formats">
                            <button class="ql-list" value="ordered"></button>
                            <button class="ql-list" value="bullet"></button>
                            <select class="ql-align"></select>
                        </span>

                    </div>
                </div>

                <div class="mr-2">
                    <button type="submit"
                        class="flex justify-center items-center p-0.5 gap-2 px-2 rounded-full text-white bg-[#F0BD66] hover:bg-[#F0AC66]">
                        <div>Comment</div>
                        <svg class="shrink-0 size-3.5" xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                            fill="currentColor" viewBox="0 0 16 16">
                            <path
                                d="M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083l6-15Zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471-.47 1.178Z" />
                        </svg>
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>

<script src="/public/js/question.js"></script>